# Migration `20200909043838`

This migration has been generated by Stephen Jensen at 9/8/2020, 11:38:38 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Feed" (
"id" SERIAL,
"name" text   NOT NULL ,
"url" text   NOT NULL ,
"authorId" integer   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Bundle" (
"id" SERIAL,
"name" text   NOT NULL ,
"authorId" integer   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."User" (
"id" SERIAL,
"auth0" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."SavedArticle" (
"id" SERIAL,
"url" text   NOT NULL ,
"authorId" integer   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."BundleTag" (
"id" SERIAL,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."FeedTag" (
"id" SERIAL,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."_BundleToFeed" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE TABLE "public"."_FeedToFeedTag" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE TABLE "public"."_FeedUserLikes" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE TABLE "public"."_BundleToBundleTag" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE TABLE "public"."_BundleUserLikes" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE UNIQUE INDEX "User.auth0_unique" ON "public"."User"("auth0")

CREATE UNIQUE INDEX "BundleTag.name_unique" ON "public"."BundleTag"("name")

CREATE UNIQUE INDEX "FeedTag.name_unique" ON "public"."FeedTag"("name")

CREATE UNIQUE INDEX "_BundleToFeed_AB_unique" ON "public"."_BundleToFeed"("A", "B")

CREATE INDEX "_BundleToFeed_B_index" ON "public"."_BundleToFeed"("B")

CREATE UNIQUE INDEX "_FeedToFeedTag_AB_unique" ON "public"."_FeedToFeedTag"("A", "B")

CREATE INDEX "_FeedToFeedTag_B_index" ON "public"."_FeedToFeedTag"("B")

CREATE UNIQUE INDEX "_FeedUserLikes_AB_unique" ON "public"."_FeedUserLikes"("A", "B")

CREATE INDEX "_FeedUserLikes_B_index" ON "public"."_FeedUserLikes"("B")

CREATE UNIQUE INDEX "_BundleToBundleTag_AB_unique" ON "public"."_BundleToBundleTag"("A", "B")

CREATE INDEX "_BundleToBundleTag_B_index" ON "public"."_BundleToBundleTag"("B")

CREATE UNIQUE INDEX "_BundleUserLikes_AB_unique" ON "public"."_BundleUserLikes"("A", "B")

CREATE INDEX "_BundleUserLikes_B_index" ON "public"."_BundleUserLikes"("B")

ALTER TABLE "public"."Feed" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Bundle" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."SavedArticle" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."_BundleToFeed" ADD FOREIGN KEY ("A")REFERENCES "public"."Bundle"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_BundleToFeed" ADD FOREIGN KEY ("B")REFERENCES "public"."Feed"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_FeedToFeedTag" ADD FOREIGN KEY ("A")REFERENCES "public"."Feed"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_FeedToFeedTag" ADD FOREIGN KEY ("B")REFERENCES "public"."FeedTag"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_FeedUserLikes" ADD FOREIGN KEY ("A")REFERENCES "public"."Feed"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_FeedUserLikes" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_BundleToBundleTag" ADD FOREIGN KEY ("A")REFERENCES "public"."Bundle"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_BundleToBundleTag" ADD FOREIGN KEY ("B")REFERENCES "public"."BundleTag"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_BundleUserLikes" ADD FOREIGN KEY ("A")REFERENCES "public"."Bundle"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_BundleUserLikes" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200909043838
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,59 @@
+datasource db {
+  provider = "postgres"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model Feed {
+  id       Int       @id @default(autoincrement())
+  name     String
+  url      String
+  bundle   Bundle[]
+  author   User?     @relation(name: "FeedAuthor", fields: [authorId], references: [id])
+  authorId Int?
+  tags     FeedTag[]
+  likes    User[]    @relation(name: "FeedUserLikes")
+}
+
+model Bundle {
+  id       Int         @id @default(autoincrement())
+  feeds    Feed[]
+  name     String
+  author   User?       @relation(name: "BundleAuthor", fields: [authorId], references: [id])
+  authorId Int?
+  tags     BundleTag[]
+  likes    User[]      @relation(name: "BundleUserLikes")
+}
+
+model User {
+  id            Int            @id @default(autoincrement())
+  auth0         String         @unique
+  bundles       Bundle[]       @relation("BundleAuthor")
+  feeds         Feed[]         @relation("FeedAuthor")
+  savedArticles SavedArticle[]
+  feedLikes     Feed[]         @relation(name: "FeedUserLikes")
+  bundleLikes   Bundle[]       @relation(name: "BundleUserLikes")
+
+}
+
+model SavedArticle {
+  id       Int    @id @default(autoincrement())
+  author   User?  @relation(fields: [authorId], references: [id])
+  url      String
+  authorId Int?
+}
+
+model BundleTag {
+  id      Int      @id @default(autoincrement())
+  name    String   @unique
+  bundles Bundle[]
+}
+
+model FeedTag {
+  id    Int    @id @default(autoincrement())
+  name  String @unique
+  feeds Feed[]
+}
```


